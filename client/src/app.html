<template>
  <require from="scripts/value-converters/forvo-property-filter.js"></require>
  <h1>${heading}</h1>
  <div>
    <a href="http://forvo.com/" title="Pronunciations by Forvo">
      <img src="http://api.forvo.com/byforvoblue.gif" width="120" height="40" alt="Pronunciations by Forvo" style="border:0" />
    </a>
  </div>
  <!--
  <form submit.trigger="addTodo()">
    <input type="text" value.bind="todoDescription">
    <button type="submit">Add Todo</button>
  </form>

  <ul>
    <li repeat.for="todo of todos">
      <input type="checkbox" checked.bind="todo.done">
      <span css="text-decoration: ${todo.done ? 'line-through' : 'none'}">
        ${todo.description}
      </span>
      <button click.trigger="removeTodo(todo)">Remove</button>
    </li>    
  </ul>
  -->
  <div>
    <button click.trigger="getSamplePhrase()">Get sample phrase</button>
  </div>
  <div>
    Get text from pic - 
    <input type="file" accept="image/*" files.bind="userImages">
    <button click.trigger="getTextFromImage()">Process image</button>
  </div>
  <div>
    <select value.bind="selectedLang">  
      <option repeat.for="lang of langList" value="${lang.langCode}">${lang.langName}</option>
    </select>
  </div>
  <form submit.trigger="getForvos()">
    <!--<input type="text" value.bind="phrase">-->
    <textarea spellcheck="false" rows="5" columns="40" name="text" value.bind="phrase"></textarea>
    <br><button type="submit">Get Forvos</button>
  </form>
  <div><h2>Phrase</h2> ${userPhrase}</div>
  <div>
    <h2>Filter options</h2>
    <select id="filterGender" ref="filterGender">  
      <option value="">All genders</option>
      <option value="m">Male</option>
      <option value="f">Female</option>
    </select>
    <select id="filterCountry" ref="filterCountry">
      <option value="" selected>All countries</option>
      <option repeat.for="country of filterableCountries" value="${country}">${country}</option>
    </select>
  </div>
  <h2>Words</h2>
  <div repeat.for="forvoObj of listOfForvoObjs">
    <h3>${forvoObj.word}</h3>    
      <div repeat.for="props of forvoObj.props |  forvoPropertyFilter:'gender':filterGender.value | forvoPropertyFilter:'country':filterCountry.value">
      <!-- preload="none" so that Forvo audio/api requests are only made for 
           the audio clips that are played. 
           TODO preload attr honored by Firefox, Chrome but not MS Edge 
                - is there a better solution? -->
      <audio controls preload="none" src="${props.audioLink}" label="${forvoObj.word}">Browser doesn't support the audio tag...</audio>
      ${props.gender === 'm' ? 'male' : 'female'} in ${props.country}
    </div>
  </div>
</template>
